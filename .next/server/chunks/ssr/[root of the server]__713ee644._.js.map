{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/pkieras/Desktop/test%20viisp/viisp_fe/src/pages/_document.tsx"],"sourcesContent":["import { Html, Head, Main, NextScript } from \"next/document\";\n\nexport default function Document() {\n  return (\n    <Html lang=\"en\">\n      <Head />\n      <body className=\"antialiased\">\n        <Main />\n        <NextScript />\n      </body>\n    </Html>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS;IACtB,qBACE,qKAAC,yHAAA,CAAA,OAAI;QAAC,MAAK;;0BACT,qKAAC,yHAAA,CAAA,OAAI;;;;;0BACL,qKAAC;gBAAK,WAAU;;kCACd,qKAAC,yHAAA,CAAA,OAAI;;;;;kCACL,qKAAC,yHAAA,CAAA,aAAU;;;;;;;;;;;;;;;;;AAInB","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///Users/pkieras/Desktop/test%20viisp/viisp_fe/src/pages/_app.tsx"],"sourcesContent":["import \"@/styles/globals.css\";\nimport type { AppProps } from \"next/app\";\n\nexport default function App({ Component, pageProps }: AppProps) {\n  return <Component {...pageProps} />;\n}\n"],"names":[],"mappings":";;;;;;AAGe,SAAS,IAAI,EAAE,SAAS,EAAE,SAAS,EAAY;IAC5D,qBAAO,qKAAC;QAAW,GAAG,SAAS;;;;;;AACjC","debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///Users/pkieras/Desktop/test%20viisp/viisp_fe/src/pages/hooks/useFetchData.ts"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport const useFetchData = (url: string, token: string | null) => {\n  const [data, setData] = useState(null);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(url, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        setData(response.data);\n      } catch (err) {\n        setError('Failed to fetch data');\n      }\n    };\n\n    fetchData();\n  }, [url, token]);\n\n  return { data, error };\n};\n"],"names":[],"mappings":";;;AACA;AACA;;;;;;;AAEO,MAAM,eAAe,CAAC,KAAa;IACxC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,WAAW,MAAM,0GAAA,CAAA,UAAK,CAAC,GAAG,CAAC,KAAK;oBACpC,SAAS;wBACP,eAAe,CAAC,OAAO,EAAE,OAAO;oBAClC;gBACF;gBACA,QAAQ,SAAS,IAAI;YACvB,EAAE,OAAO,KAAK;gBACZ,SAAS;YACX;QACF;QAEA;IACF,GAAG;QAAC;QAAK;KAAM;IAEf,OAAO;QAAE;QAAM;IAAM;AACvB","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///Users/pkieras/Desktop/test%20viisp/viisp_fe/src/pages/hooks/useFetchUserInfo.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport const useFetchUserInfo = (token: string | null) => {\n  const [userInfo, setUserInfo] = useState({ name: '', country: '' });\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchUserInfo = async () => {\n      try {\n        const response = await axios.get('http://localhost:3001/api/info', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        setUserInfo(response.data);\n      } catch (err) {\n        setError('Failed to fetch user info');\n      }\n    };\n\n    fetchUserInfo();\n  }, [token]);\n\n  return { userInfo, error };\n};\n"],"names":[],"mappings":";;;AAAA;AACA;;;;;;;AAEO,MAAM,mBAAmB,CAAC;IAC/B,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;QAAE,MAAM;QAAI,SAAS;IAAG;IACjE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,gBAAgB;YACpB,IAAI;gBACF,MAAM,WAAW,MAAM,0GAAA,CAAA,UAAK,CAAC,GAAG,CAAC,kCAAkC;oBACjE,SAAS;wBACP,eAAe,CAAC,OAAO,EAAE,OAAO;oBAClC;gBACF;gBACA,YAAY,SAAS,IAAI;YAC3B,EAAE,OAAO,KAAK;gBACZ,SAAS;YACX;QACF;QAEA;IACF,GAAG;QAAC;KAAM;IAEV,OAAO;QAAE;QAAU;IAAM;AAC3B","debugId":null}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///Users/pkieras/Desktop/test%20viisp/viisp_fe/src/pages/utils/authUtils.ts"],"sourcesContent":["import axios from 'axios';\n\nexport const getJwtToken = () => {\n  console.log(window.sessionStorage)\n  if (typeof window !== 'undefined' && window.sessionStorage) {\n    return sessionStorage.getItem('jwt');\n  }\n  return null;\n};\n\n\nexport const handleLogout = () => {\n  sessionStorage.removeItem('jwt');\n  window.location.reload();\n};\n\nexport const fetchTicket = async () => {\n  try {\n    const response = await axios.post('http://localhost:3001/api/ticket');\n    return response.data.ticket;\n  } catch {\n    throw new Error('Failed to obtain ticket');\n  }\n};\n\nexport const fetchToken = async (ticket: string) => {\n  try {\n    const response = await axios.post('http://localhost:3001/api/token', {\n      ticketId: ticket,\n    });\n    if (response.status === 200) {\n      sessionStorage.setItem('jwt', response.data);\n      return response.data;\n    }\n  } catch {\n    throw new Error('Failed to fetch token');\n  }\n};\n"],"names":[],"mappings":";;;;;;AAAA;;;;;;AAEO,MAAM,cAAc;IACzB,QAAQ,GAAG,CAAC,OAAO,cAAc;IACjC,uCAA4D;;IAE5D;IACA,OAAO;AACT;AAGO,MAAM,eAAe;IAC1B,eAAe,UAAU,CAAC;IAC1B,OAAO,QAAQ,CAAC,MAAM;AACxB;AAEO,MAAM,cAAc;IACzB,IAAI;QACF,MAAM,WAAW,MAAM,0GAAA,CAAA,UAAK,CAAC,IAAI,CAAC;QAClC,OAAO,SAAS,IAAI,CAAC,MAAM;IAC7B,EAAE,OAAM;QACN,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,WAAW,MAAM,0GAAA,CAAA,UAAK,CAAC,IAAI,CAAC,mCAAmC;YACnE,UAAU;QACZ;QACA,IAAI,SAAS,MAAM,KAAK,KAAK;YAC3B,eAAe,OAAO,CAAC,OAAO,SAAS,IAAI;YAC3C,OAAO,SAAS,IAAI;QACtB;IACF,EAAE,OAAM;QACN,MAAM,IAAI,MAAM;IAClB;AACF","debugId":null}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///Users/pkieras/Desktop/test%20viisp/viisp_fe/src/pages/components/UserInfo.tsx"],"sourcesContent":["import React from 'react';\n\ninterface UserInfoProps {\n  name: string;\n  country: string;\n}\n\nconst UserInfo: React.FC<UserInfoProps> = ({ name, country }) => (\n  <h1 className=\"text-xl font-bold mb-4\">\n    {name}, {country}\n  </h1>\n);\n\nexport default UserInfo;\n"],"names":[],"mappings":";;;;;AAOA,MAAM,WAAoC,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,iBAC1D,qKAAC;QAAG,WAAU;;YACX;YAAK;YAAG;;;;;;;uCAIE","debugId":null}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///Users/pkieras/Desktop/test%20viisp/viisp_fe/src/pages/components/DataTable.tsx"],"sourcesContent":["import React from 'react';\n\ninterface DataTableProps {\n  data: Array<{ kodas: string; miestas: string; imone: string }>;\n}\n\nconst DataTable: React.FC<DataTableProps> = ({ data }) => (\n  <table className=\"min-w-full bg-white border border-gray-200\">\n    <thead>\n      <tr>\n        <th className=\"border px-4 py-2\">Kodas</th>\n        <th className=\"border px-4 py-2\">Miestas</th>\n        <th className=\"border px-4 py-2\">Imone</th>\n      </tr>\n    </thead>\n    <tbody>\n      {data.map((item, index) => (\n        <tr key={index}>\n          <td className=\"border px-4 py-2\">{item.kodas}</td>\n          <td className=\"border px-4 py-2\">{item.miestas}</td>\n          <td className=\"border px-4 py-2\">{item.imone}</td>\n        </tr>\n      ))}\n    </tbody>\n  </table>\n);\n\nexport default DataTable;\n"],"names":[],"mappings":";;;;;AAMA,MAAM,YAAsC,CAAC,EAAE,IAAI,EAAE,iBACnD,qKAAC;QAAM,WAAU;;0BACf,qKAAC;0BACC,cAAA,qKAAC;;sCACC,qKAAC;4BAAG,WAAU;sCAAmB;;;;;;sCACjC,qKAAC;4BAAG,WAAU;sCAAmB;;;;;;sCACjC,qKAAC;4BAAG,WAAU;sCAAmB;;;;;;;;;;;;;;;;;0BAGrC,qKAAC;0BACE,KAAK,GAAG,CAAC,CAAC,MAAM,sBACf,qKAAC;;0CACC,qKAAC;gCAAG,WAAU;0CAAoB,KAAK,KAAK;;;;;;0CAC5C,qKAAC;gCAAG,WAAU;0CAAoB,KAAK,OAAO;;;;;;0CAC9C,qKAAC;gCAAG,WAAU;0CAAoB,KAAK,KAAK;;;;;;;uBAHrC;;;;;;;;;;;;;;;;uCAUF","debugId":null}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///Users/pkieras/Desktop/test%20viisp/viisp_fe/src/pages/index.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useFetchData } from './hooks/useFetchData';\nimport { useFetchUserInfo } from './hooks/useFetchUserInfo';\nimport { handleLogout, fetchTicket, fetchToken } from './utils/authUtils';\nimport UserInfo from './components/UserInfo';\nimport DataTable from './components/DataTable';\n\nexport default function Home() {\n  const [ticket, setTicket] = useState<string | null>(null);\n  const [tokenData, setTokenData] = useState<string | null>(null);\n  const [token, setToken] = useState<string | null>(null);\n\n  // Initialize token from sessionStorage on the client side\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const storedToken = sessionStorage.getItem('jwt');\n      setToken(storedToken);\n    }\n  }, []);\n\n  const { data, error: dataError } = useFetchData('http://localhost:3001/api/data', token);\n  const { userInfo, error: userInfoError } = useFetchUserInfo(token);\n\n  useEffect(() => {\n    if (!token && !ticket) {\n      fetchTicket()\n        .then(setTicket)\n        .catch(() => console.error('Failed to obtain ticket'));\n    } else if (ticket) {\n      const interval = setInterval(async () => {\n        try {\n          const newToken = await fetchToken(ticket);\n          setTokenData(newToken);\n          clearInterval(interval);\n        } catch {\n          // Handle polling errors if necessary\n        }\n      }, 5000);\n\n      return () => clearInterval(interval);\n    }\n  }, [token, ticket]);\n\n  useEffect(() => {\n    if (tokenData) {\n      if (typeof window !== 'undefined') {\n        sessionStorage.setItem('jwt', tokenData);\n      }\n      window.location.reload();\n    }\n  }, [tokenData]);\n\n  if (dataError || userInfoError) {\n    return <div className=\"text-red-500\">Error: {dataError || userInfoError}</div>;\n  }\n\n  if (!data) {\n    if (ticket) {\n      return (\n        <div className=\"p-4\">\n          <h1 className=\"text-xl font-bold mb-4\">Informacija prieinama tik patvirtinus savo tapatybę</h1>\n          <form\n            action=\"https://test.epaslaugos.lt/portal/external/services/authentication/v2/\"\n            method=\"post\"\n            target=\"_blank\"\n            className=\"flex flex-col items-start\">\n            <input name=\"ticket\" value={ticket} type=\"hidden\" />\n            <button\n              type=\"submit\"\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-200\">\n              Prisijungti per VIISP\n            </button>\n          </form>\n        </div>\n      );\n    } else {\n      return <div className=\"text-gray-500\">Loading...</div>;\n    }\n  }\n\n  return (\n    <div className=\"p-4\">\n      <UserInfo name={userInfo.name} country={userInfo.country} />\n      <DataTable data={data} />\n      <button\n        onClick={handleLogout}\n        className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition duration-200 mt-4\">\n        Atsijungti\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AAEe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAiB;IACpD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAiB;IAC1D,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,0DAA0D;IAC1D,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,uCAAmC;;QAGnC;IACF,GAAG,EAAE;IAEL,MAAM,EAAE,IAAI,EAAE,OAAO,SAAS,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,eAAY,AAAD,EAAE,kCAAkC;IAClF,MAAM,EAAE,QAAQ,EAAE,OAAO,aAAa,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,mBAAgB,AAAD,EAAE;IAE5D,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,SAAS,CAAC,QAAQ;YACrB,CAAA,GAAA,2HAAA,CAAA,cAAW,AAAD,IACP,IAAI,CAAC,WACL,KAAK,CAAC,IAAM,QAAQ,KAAK,CAAC;QAC/B,OAAO,IAAI,QAAQ;YACjB,MAAM,WAAW,YAAY;gBAC3B,IAAI;oBACF,MAAM,WAAW,MAAM,CAAA,GAAA,2HAAA,CAAA,aAAU,AAAD,EAAE;oBAClC,aAAa;oBACb,cAAc;gBAChB,EAAE,OAAM;gBACN,qCAAqC;gBACvC;YACF,GAAG;YAEH,OAAO,IAAM,cAAc;QAC7B;IACF,GAAG;QAAC;QAAO;KAAO;IAElB,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,WAAW;YACb,uCAAmC;;YAEnC;YACA,OAAO,QAAQ,CAAC,MAAM;QACxB;IACF,GAAG;QAAC;KAAU;IAEd,IAAI,aAAa,eAAe;QAC9B,qBAAO,qKAAC;YAAI,WAAU;;gBAAe;gBAAQ,aAAa;;;;;;;IAC5D;IAEA,IAAI,CAAC,MAAM;QACT,IAAI,QAAQ;YACV,qBACE,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAG,WAAU;kCAAyB;;;;;;kCACvC,qKAAC;wBACC,QAAO;wBACP,QAAO;wBACP,QAAO;wBACP,WAAU;;0CACV,qKAAC;gCAAM,MAAK;gCAAS,OAAO;gCAAQ,MAAK;;;;;;0CACzC,qKAAC;gCACC,MAAK;gCACL,WAAU;0CAAqF;;;;;;;;;;;;;;;;;;QAMzG,OAAO;YACL,qBAAO,qKAAC;gBAAI,WAAU;0BAAgB;;;;;;QACxC;IACF;IAEA,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC,gIAAA,CAAA,UAAQ;gBAAC,MAAM,SAAS,IAAI;gBAAE,SAAS,SAAS,OAAO;;;;;;0BACxD,qKAAC,iIAAA,CAAA,UAAS;gBAAC,MAAM;;;;;;0BACjB,qKAAC;gBACC,SAAS,2HAAA,CAAA,eAAY;gBACrB,WAAU;0BAAwF;;;;;;;;;;;;AAK1G","debugId":null}}]
}